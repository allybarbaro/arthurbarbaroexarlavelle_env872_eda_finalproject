---
title: "Laura_Scratch_Work"
output: html_document
date: "2023-04-14"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#Loaded packages
library(tidyverse);library(rvest); library(ggplot2); library(lubridate); library(here); library(sf); library(data.table)

#Checked working directory
getwd()
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r Wrangled the data}
#Read in all hazard data for all of NC
NC_Hazard <- read.csv(file = here("Data/Raw/NRI_Table_CensusTracts_NorthCarolina.csv"), stringsAsFactors = TRUE)

#Filtered data for coastal flooding in Carteret County
Carteret_Flooding <- NC_Hazard %>%
  filter(COUNTY == "Carteret") %>%
  select(TRACT, CFLD_AFREQ)

#Filtered data for hurricanes in Carteret County
Carteret_Hurricanes <- NC_Hazard %>%
  filter(COUNTY == "Carteret") %>%
  select(TRACT, HRCN_AFREQ)

#Saved processed datasets
write.csv(Carteret_Flooding, row.names = FALSE, file = "./Data/Processed/Carteret_Flooding_Processed.csv")
    
write.csv(Carteret_Hurricanes, row.names = FALSE, file = "./Data/Processed/Carteret_Hurricanes_Processed.csv")

```

```{r warning=FALSE}

#Bar graph of racial composition of each census tract (later to highlight carteret county)
Carteret_Race <- read.csv(file = here("Data/Processed/carteret.race.number.csv"), stringsAsFactors = TRUE)

Carteret_Race <- Carteret_Race %>%
  

Race_Plot <- ggplot(Carteret_Race, aes(x = Census.Tract, y=c(White,Black.or.African.American,American.Indian.and.Alaska.Native,Cherokee.Tribal.Grouping,Sioux.Tribal.Grouping,Asian, Asian.Indian, Chinese, Filipino))) +
  geom_col() + 
  labs(title="Racial Composition of Each Census Tract", x="Census Tract", y="Racial Composition") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  ylim(0,4)

print(Race_Plot)

#Bar graph of annualized frequency of coastal flooding of each census tract
Carteret_Flooding$TRACT <- as.factor(Carteret_Flooding$TRACT)

Flooding_Plot <- ggplot(Carteret_Flooding, aes(x = TRACT, y = CFLD_AFREQ)) +
  geom_col() + 
  labs(title="Annualized Frequency of Coastal Flooding by Census Tract", x="Census Tract", y="Annualized Frequency of Coastal Flooding") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  ylim(0,4)

print(Flooding_Plot)

#Bar graph of annualized frequency of hurricanes of each census tract
Carteret_Hurricanes$TRACT <- as.factor(Carteret_Hurricanes$TRACT)

Hurricanes_Plot <- ggplot(Carteret_Hurricanes, aes(x = TRACT, y = HRCN_AFREQ)) +
  geom_col() + 
  labs(title="Annualized Frequency of Hurricanes by Census Tract", x="Census Tract", y="Annualized Frequency of Hurricanes") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  ylim(0,3.5)

print(Hurricanes_Plot)


```



## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
