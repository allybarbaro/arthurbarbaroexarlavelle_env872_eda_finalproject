---
title: "Laura_Scratch_Work"
output: html_document
date: "2023-04-14"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#Loaded packages
library(tidyverse);library(rvest); library(ggplot2); library(lubridate); library(here); library(sf)

#Checked working directory
getwd()
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r Wrangled the data}
#Read in all hazard data for all of NC
NC_Hazard <- read.csv(file = here("Data/Raw/NRI_Table_CensusTracts_NorthCarolina.csv"), stringsAsFactors = TRUE)

#Filtered data for coastal flooding in Carteret County
Carteret_Flooding <- NC_Hazard %>%
  filter(COUNTY == "Carteret") %>%
  select(TRACT, CFLD_AFREQ)

#Filtered data for hurricanes in Carteret County
Carteret_Hurricanes <- NC_Hazard %>%
  filter(COUNTY == "Carteret") %>%
  select(TRACT, POPULATION, HRCN_AFREQ)

#Saved processed datasets
write.csv(Carteret_Flooding, row.names = FALSE, file = "./Data/Processed/Carteret_Flooding_Processed.csv")
    
write.csv(Carteret_Hurricanes, row.names = FALSE, file = "./Data/Processed/Carteret_Hurricanes_Processed.csv")

```

```{r}

#Bar graph of racial composition of each census tract (later to highlight carteret county)
Carteret_Race <- read.csv(file = here("Data/Processed/Carteret.race.csv"), stringsAsFactors = TRUE)

Race_Plot <- ggplot(Carteret_Race, aes(x = Tract, y= Race)) + 
  geom_bar() + 
  labs(title="Racial Composition of Each Census Tract", x="Tract", y="Race")

#Bar graph of annualized frequency of coastal flooding of each census tract
Carteret_Flooding$TRACT <- as.factor(Carteret_Flooding$TRACT)

Flooding_Plot <- ggplot(Carteret_Flooding, aes(x = TRACT, y = CFLD_AFREQ)) +
  geom_col() + 
  labs(title="Annualized Frequency of Coastal Flooding by Census Tract", x="Census Tract", y="Annualized Frequency of Coastal Flooding") +
  theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)) +
  ylim(0,4)

ggplot(Carteret_Flooding, aes(x = TRACT, y = CFLD_AFREQ)) +
  geom_col()

print(Flooding_Plot)

#Bar graph of annualized frequency of hurricanes of each census tract



```



## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
